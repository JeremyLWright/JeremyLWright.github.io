<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.100.2" />

  
  <meta name="description" content="Some description">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://quiescent.us/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://quiescent.us/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://quiescent.us/favicon-16x16.png">

  
  <link rel="manifest" href="https://quiescent.us/site.webmanifest">

  
  <link rel="mask-icon" href="https://quiescent.us/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://quiescent.us/css/bootstrap.min.css" />

  
  <link rel="stylesheet" href="https://quiescent.us/css/syntax.css" />
  
  
  <title>Using QuickCheck&#39;s Positive Type Level Modifier | The Quiescent Current</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/posts">Posts</a>
    
    <a href="/series">Series</a>
    
    <a href="/tags">Tags</a>
    
    <a href="/about">About</a>
    
  </div>
</nav>
  
  <div class="container">
    <article>
      <h1>Using QuickCheck&rsquo;s Positive Type Level Modifier</h1>
<p>One of my students this semester was struggling with the material. This
student is a very diligent worker and has been researching the problems trying
to get a better understanding of the material before digging in. Sometimes
however, there is no replacement for just digging in and coding something.
This does at least two things, it solidifies the material you&rsquo;re read so far,
and most importantly it shows you the limits of what you currently understand
and urges you to learn more. Interestingly, I&rsquo;ve found in my own intellectual
endeavors some things just don&rsquo;t make any sense until you&rsquo;ve tried to use it
<em>in anger</em>.</p>
<hr>
<p>I gave this student the advice to</p>
<blockquote>
<p>Put down the books.
Pick up a pencil, some paper and a compiler
Code it. Make your brain hurt.</p>
</blockquote>
<p>As I was sharing this I realized how hypocritical I was. I&rsquo;ve <em>been
learning</em> Haskell, and yet I haven&rsquo;t coded in Haskell in over a year. I&rsquo;ve
been reading books, watching videos.</p>
<blockquote>
<p>I&rsquo;ve been a Spectator.
It&rsquo;s time to be a Doer.</p>
</blockquote>
<p>I started working through the codewars.com problems, specifically working on
the test cases for this <a href="https://www.codewars.com/kata/576757b1df89ecf5bd00073b/train/haskell">problem</a>.</p>
<p>While coding the QuickCheck properties (tests) for this problem however, I was
completely lost at trying to build a property with only positive generator
values.</p>
<p>This particular test is trying to show that the height of the pyramid is the
length of the out put array/list.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-haskell" data-lang="haskell"><span class="line"><span class="cl"><span class="nf">prop_heightIsLength</span> <span class="ow">::</span> <span class="kt">Int</span> <span class="ow">-&gt;</span>  <span class="kt">Bool</span>
</span></span><span class="line"><span class="cl"><span class="nf">prop_heightIsLength</span> <span class="n">height</span> <span class="ow">=</span> <span class="n">length</span> <span class="p">(</span> <span class="n">buildTower</span> <span class="n">height</span> <span class="p">)</span> <span class="o">==</span> <span class="n">height</span>
</span></span></code></pre></div><p>However, <code>buildTower</code> only defined for positive values. My first pass of
the property is generates negative values (and 0 values) as input. After some
searching I was able to find the Positive type modifier for quickcheck.</p>
<p><a href="https://hackage.haskell.org/package/QuickCheck-2.4.1.1/docs/Test-QuickCheck.html#t:Positive">https://hackage.haskell.org/package/QuickCheck-2.4.1.1/docs/Test-QuickCheck.html#t:Positive</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-haskell" data-lang="haskell"><span class="line"><span class="cl"><span class="nf">prop_heightIsLength</span> <span class="ow">::</span> <span class="kt">Positive</span> <span class="kt">Int</span> <span class="ow">-&gt;</span>  <span class="kt">Bool</span>
</span></span><span class="line"><span class="cl"><span class="nf">prop_heightIsLength</span> <span class="n">height</span> <span class="ow">=</span> <span class="n">length</span> <span class="p">(</span> <span class="n">buildTower</span> <span class="n">height</span> <span class="p">)</span> <span class="o">==</span> <span class="n">height</span>
</span></span></code></pre></div><p>However, this doesn&rsquo;t compile.</p>
<pre tabindex="0"><code>Couldn&#39;t match expected type ‘Positive Int’
                  with actual type ‘Int’
</code></pre><p>Which brings me to my biggest challenge in learning anything new. Frequently
in learning something new I don&rsquo;t have enough knowledge to ask the right
question, or even understand the answer. This is one of those cases.</p>
<h2 id="failed-questions">Failed Questions</h2>
<ol>
<li>haskell unwrap Positive newtype</li>
<li>haskell use QuickCheck Positive</li>
<li>haskell constraint quickcheck generator</li>
</ol>
<p>This lead me to the closest answer</p>
<p><a href="https://stackoverflow.com/questions/11910143/positive-integer-type#11910221">https://stackoverflow.com/questions/11910143/positive-integer-type#11910221</a></p>
<p>However, it is demonstrating how to build a custom generator. I just want to
use the built in constraints!</p>
<blockquote>
<p>Why is this so hard?
Because I didn&rsquo;t know how to read the type signature of the Postive type.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-haskell" data-lang="haskell"><span class="line"><span class="cl"><span class="c1">-- This property does not compile</span>
</span></span><span class="line"><span class="cl"><span class="nf">prop_heightIsLength</span> <span class="ow">::</span> <span class="kt">Positive</span> <span class="kt">Int</span> <span class="ow">-&gt;</span>  <span class="kt">Bool</span>
</span></span><span class="line"><span class="cl"><span class="nf">prop_heightIsLength</span> <span class="n">height</span> <span class="ow">=</span> <span class="n">length</span> <span class="p">(</span> <span class="n">buildTower</span> <span class="n">height</span> <span class="p">)</span> <span class="o">==</span> <span class="n">height</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-- This property compiles</span>
</span></span><span class="line"><span class="cl"><span class="nf">prop_heightIsLength&#39;</span> <span class="ow">::</span> <span class="kt">Positive</span> <span class="kt">Int</span> <span class="ow">-&gt;</span>  <span class="kt">Bool</span>
</span></span><span class="line"><span class="cl"><span class="nf">prop_heightIsLength&#39;</span> <span class="p">(</span><span class="kt">Positive</span> <span class="n">height</span><span class="p">)</span> <span class="ow">=</span> <span class="n">length</span> <span class="p">(</span> <span class="n">buildTower</span> <span class="n">height</span> <span class="p">)</span> <span class="o">==</span> <span class="n">height</span>
</span></span></code></pre></div><p>Naively, I thought the different is the parenthesis. Remember, parenthesis are
<em>only used for grouping</em> in haskell. They have no other purpose. The different
is <em>what is bound to the name <code>height</code></em>. In the first version, I&rsquo;m binding
a <code>Positive Int</code> to the name <code>height</code> in the second version I&rsquo;m
binding merely an <code>Int</code> to <code>height</code>. The Positive type modifier
assures that the values bound to it&rsquo;s parameter are always positive. The bound
value however will retain the <code>Int</code> type, even though it&rsquo;s value is always
positive.</p>
<p>I&rsquo;m unstuck now. Moving on.</p>

    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-168773592-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#216942",
      "text": "#b2d192"
    },
    "button": {
      "background": "#afed71"
    }
  }
})});
</script>

</body>

</html>
