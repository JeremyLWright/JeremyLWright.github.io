<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.81.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>Branching with Mercurial&nbsp;&ndash;&nbsp;The Quiescent Current</title><link rel="stylesheet" href="/css/core.min.53081165f1d03b36fb9f4de24b00505db6b09fc2388839b7b17a05c66c9d7e8a258e194012e5b1f53b59d5f907244126.css" integrity="sha384-UwgRZfHQOzb7n03iSwBQXbawn8I4iDm3sXoFxmydfooljhlAEuWx9TtZ1fkHJEEm"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Branching with Mercurial" /><body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><span class="site name">The Quiescent Current</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/posts">Blog</a><a class="nav item" href="/series">Series</a><a class="nav item" href="/languages">Languages</a><a class="nav item" href="/about">About</a></nav></div></span></div><div class="site slogan"><span class="title">Go Far. Go Together.</span></div></section><section id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">Branching with Mercurial</h1><p class="article date">Monday, February 20, 2012</p></section><article class="article markdown-body"><p>Mercurial supports two separate methods for branching. The first is built into how distributed version control functions, in that every clone is a branch itself. This is the branching method Joel Sposky recommends on hginit.com. The second method is called <em><a href="http://mercurial.selenic.com/wiki/Branch"target="_blank" rel="noopener noreferrer">local branches</a>
</em>. Initially I liked the local branch method; I liked it for the fact that I felt smart for using it. It did not improve productivity. There is a simple reason for this, with local branches it is difficult to diff the branch to the main branch of development e.g. the trunk. This post will walk through local branches, how I used then, and finally, how I quit local branches in favor of a cloning approach.</p>
<!-- raw HTML omitted -->
<p>I use version control because I like to experiment when I code. I frequently approach a class design as: What if <em>this</em> happened? Frequently, people comment, &ldquo;I don&rsquo;t need version control; I&rsquo;m just one person.&rdquo; This is a rather naive perspective on version control. Yes, version control can be used to collaborate work between different people or different teams. In fact, originally, this was it&rsquo;s primary use case, however version control is so much more.</p>
<p>Personally, I feel very unsafe when working without version control, its coding without a safety net. Once you get something working, you don&rsquo;t want to touch it because you might never be able to get it back to this working state again. Version control fixes this behavior. When you get a semi-working version of something <strong>tag it</strong> then keep working; if you get something better, tag again. If you break it completely, revert back to the previous tag.  Its a great tool. Branches are that idea on steroids. I use branches extensively, at work I tag of ever issue number, for school/home I tag on each capricious thought. One project I implemented the <a href="http://www.codestrokes.com/2011/10/parallel-game-of-life/"target="_blank" rel="noopener noreferrer">Game of Life</a>
, as a conduit to experiment with OpenMP. At one time I had 6 parallel branches each with a different experiment or idea:</p>
<ul>
<li>
<p>Parallel Game of Life</p>
<ul>
<li>
<p>data_dependency_tests</p>
</li>
<li>
<p>octave_experiments</p>
</li>
<li>
<p>pthread_vs_openmp</p>
</li>
<li>
<p>graphical_debugger</p>
</li>
<li>
<p>parallel-game-of-life</p>
</li>
<li>
<p>SDL_ext_experiments</p>
</li>
</ul>
</li>
</ul>
<p>Originally, I tried using local-branches. This is the <em>hg branch</em> command. Just type hg branch, and a branch name, then keep working. To switch between branches use hg update -c &lt;branch_name&gt;. This is the problem. Its hard to work on multiple branches at that same time. I was constantly switching between branches, and that wasn&rsquo;t very productive.</p>
<p>The one upside to local branches is that all the branches are carried with the repository, so you can work on multiple branches on different computers just by cloning one repository. However the loss of productivity by constantly switching between different branches was too much. I now do something different. I clone for a branch. When I check out a new project, I create a directory first, then clone my remote-repository into that folder with the name _top _i.e. top-level. Then I hg clone any branches I want and start working. This makes it very easy to merge, between working copies, and diff changes. Then If I don&rsquo;t like an idea I can throw it away completely, and it doesn&rsquo;t dirty my changeset history!</p>
<p>Here is a snapshot of a project with all branches:</p>
<p><a href="http://www.codestrokes.com/wp-content/uploads/2012/02/Screenshot-GOF.png"target="_blank" rel="noopener noreferrer"><img  src="http://www.codestrokes.com/wp-content/uploads/2012/02/Screenshot-GOF-300x272.png"
        alt/></a>
</p>
<p>Now I can create a tab in vim, and open each branch into a separate tab. Awesome!</p>
</article><section class="article labels"><a class="category" href=/categories/project/>Project</a></section><div class="article share addthis_inline_share_toolbox"></div><script defer src="/js/addthis_widget.min.99872df1091f055fca553e0b74b13c09bd383ef42b1c56a9edb651a91f122d56e7bc9a2fad73528246215b379b043226.js#pubid=ra-1234567890" integrity="sha384-mYct8QkfBV/KVT4LdLE8Cb04PvQrHFap7bZRqR8SLVbnvJovrXNSgkYhWzebBDIm"></script>
</div>
<div class="article bottom"><section class="article navigation"><p><a class="link" href="/2012/03/abstract-syntax-trees-introduction-to-flex/"><span class="iconfont icon-article"></span>Abstract Syntax Trees: Introduction to Flex</a></p><p><a class="link" href="/2012/02/compile-time-polymorphism/"><span class="iconfont icon-article"></span>Compile-Time Polymorphism</a></p></section><section class="article discussion"><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "codestrokes2" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></section></div></section><section id="footer"><div class="footer-wrap">
    <p class="copyright">©2020 Jeremy Wright</p>
    <p class="powerby"><span>Powered&nbsp;by&nbsp;</span><a href="https://gohugo.io" 
        target="_blank" rel="noopener noreferrer">Hugo</a><span>&nbsp;&amp;&nbsp;</span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank" rel="noopener noreferrer">Notepadium</a></p></div>
</section><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/&#43;DiW/UqRcLbRjq" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l&#43;B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd&#43;qj&#43;o24G5ZU2zJz" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
            onload="renderMathInElement(document.body);"></script></body>

</html>