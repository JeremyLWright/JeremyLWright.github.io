<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.73.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>D for the C&#43;&#43; Programmer&nbsp;&ndash;&nbsp;Quiescent Engineering, LLC.</title><link rel="stylesheet" href="/css/core.min.6fe5d1dee32d5c1f625e8d9d541db5df28b4c99bf9f600cc7284f342438549386d2338be608f2edbb2e7fef8cbcccf30.css" integrity="sha384-b&#43;XR3uMtXB9iXo2dVB213yi0yZv59gDMcoTzQkOFSThtIzi&#43;YI8u27Ln/vjLzM8w"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="D for the C&#43;&#43; Programmer" /><body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><span class="site name">Quiescent Engineering, LLC.</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/posts">Blog</a><a class="nav item" href="/about">About</a></nav></div></span></div><div class="site slogan"><span class="title">Go Far. Go Together.</span></div></section><section id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">D for the C++ Programmer</h1><p class="article date">Wednesday, May 18, 2011</p></section><article class="article markdown-body"><p>As a comparative study, I am porting a Red-Black Tree from C++ to the <a href="http://www.digitalmars.com/d/2.0/dmd-linux.html"target="_blank">D programming language</a> (<a href="http://www.codestrokes.com/archives/59"target="_blank">Part 1</a>, <a href="http://www.codestrokes.com/archives/83"target="_blank">Part 2</a>). Overall D is an easy, practical transition for the C++ programmer. D provides a number of features for implementing correct code, however it is D’s simplicity that makes it truly enticing as a replacement. While D retains _C Style Syntax, _it is considerably simpler than C++, especially in the presence of exceptions.</p>
<!-- raw HTML omitted -->
<h3 id="simple-and-familiar">Simple and Familiar</h3>
<p>Readable code makes maintaining programs simpler, ergo cheaper.  D’s syntax stems from the same tree as C, allowing programmers to leverage their considerable experience; yet D comes with a number of useful changes to make code more readable, creating a simple, familiar environment.  This project was intended to expose the differences between D and C++.  Properties are an excellent example of a small change made in D, which reaps great benefit for readability.  Wait, what’s the problem? One can declare getters and setters in C++, isn’t that enough? I say no.  Take the following example in C++:</p>
<pre><code>void RedBlackTree::Transplant(RedBlackNode::Ptr u, RedBlackNode::Ptr v)
{
    if(u-&gt;Parent() == nil)
        root = v;
    else if(u == u-&gt;Parent()-&gt;Left())
        u-&gt;Parent()-&gt;Left(v);
    else
        u-&gt;Parent()-&gt;Right(v);
    v-&gt;Parent(u-&gt;Parent());
}
</code></pre>
<p>Line 6 actually modified u’s right sibling (u-&gt;Parent()-&gt;Right()).  Where is the equal sign? There isn’t one. Experienced C++ programmers are used to looking at this deficiency as status quo.  However, its much easier in D to see the statement’s intent.</p>
<pre><code>void Transplant(RedBlackNode u, RedBlackNode v)
{
    if(u.Parent == nil)
        root = v;
    else if(u == v.Parent.Left)
        u.Parent.Left = v;
    else
                u.Parent.Right = v;
    v.Parent = u.Parent;
}
</code></pre>
<p>D uses the property idiom to clearly show that an assignment is taking place.  This simple example is powerful.  Notice that the <em>syntax is nearly identical</em> between the 2 languages. This similarity makes it very easy for one to use their current C++ skills almost immediately.</p>
<h3 id="c-is-whitespace-sensitive">C++ is Whitespace Sensitive</h3>
<p>One of the biggest complaints I hear from new <a href="http://www.python.org"target="_blank">python</a> programmers is whitespace sensitivity.  Python uses whitespace as a method to control scope, something most editors do automatically anyway using indention.</p>
<pre><code>def fn1(x):
    if(x is int):
        return 1+1;
    else:
        x = str(int(x) + 1)
        return x;
</code></pre>
<p>By forcing whitespace in the syntax braces (“{“ and “}”) are unnecessary, and all python programs look the same making it easier to share code.  It works well, and Python if very consistent in it’s implementation. C style languages are not whitespace sensitive, <strong>except</strong> special cases in C++.</p>
<pre><code>void fn1()
{
    vector&lt;vector&lt;int&gt;&gt; stl_2d_vector; //Doesn't compile
    vector&lt;vector&lt;int&gt; &gt; stl_2d_vector; //Does compile
}
</code></pre>
<p>C++ uses the angle-brackets “&lt;” and “&gt;” for a number of functions:</p>
<ol>
<li>
<p>Templates</p>
</li>
<li>
<p>Less-Than, Greater-Than comparison</p>
</li>
<li>
<p>Bit-Wise Shifting</p>
</li>
<li>
<p>Stream-Insertion Operator</p>
</li>
<li>
<p>Stream-Extraction Operator</p>
</li>
</ol>
<p>This isn’t so bad except that there are two separate, semantic classes here.  Sometimes the &lt; and &gt; characters are used to <strong>enclose text</strong> as in the <!-- raw HTML omitted --> example above.  Otherwise, the &lt; and &gt; characters do <strong>not enclose text</strong> and form an independent operator.  Said another way, angle brackets can form a digraph operator, and can form a semantic grouping…depending on the context.  Context makes C++ difficult to read.</p>
<p>This is just one example of how the obtuse syntax of C++ makes writing a compiler as well as readable code, difficult.  In this example, the compiler is trying to treat the “&raquo;” digraph as an operator, instead of grouping the template arguments.  The space between the 2 “&gt;” symbol allows the compiler to pair the angle brackets, enclose the template and compile the expression.</p>
<p>D provides a <a href="http://www.digitalmars.com/d/2.0/templates-revisited.html"target="_blank">consistent alternative</a>. Which leverage an existing operator for enclosing symbols, the parentheses.  D makes instantiating templates easy:</p>
<pre><code>void fn1()
{
    vector!(vector!(int)) stl_2d_vector; //Does compile
    vector!(vector!(int) ) stl_2d_vector; //Still compiles
}
</code></pre>
<p>The “!” operator is always used as a unary operator. Sometimes it can be used as not or one’s complement (bit-twiddle) as in:</p>
<pre><code>if( t != 1) //If T is not equal to 1
    //Do Something
t = !t; // One's complement t;
</code></pre>
<p>However, ! always means “I stand alone, and I modify the token to my right”.  When we create a template, the ! modifies the enclosing parenthetical statement to transform it to a template expression.  D does not overload operators, or tokens. D does not use context sensitive syntax.  D, like python, allows one to write very readable software.</p>
<p>D gives us tools to write <a href="http://www.codestrokes.com/archives/83"target="_blank">correct code</a>, and offers a simplified syntax that leverages our existing C++ experience.  Starting new projects in a new language is a daunting task, yet D offers a lower-risk path in upgrading to a modern language.  D isn’t perfect but it provides a number of features for C++ developers to start solving real problems, today.</p>
</article><section class="article labels"><a class="category" href=/categories/algorithm/>Algorithm</a><a class="tag" href=/tags/c&#43;&#43;/>C&#43;&#43;</a><a class="tag" href=/tags/comparison/>comparison</a><a class="tag" href=/tags/correct-code/>correct code</a><a class="tag" href=/tags/d/>D</a></section></div>
<div class="article bottom"><section class="article navigation"><p><a class="link" href="/2011/05/bucket-sort/"><span class="iconfont icon-article"></span>Bucket Sort</a></p><p><a class="link" href="/2011/05/class-invariants-red-black-tree-part-2/"><span class="iconfont icon-article"></span>Class Invariants</a></p></section><section class="article discussion"><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "codestrokes2" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></section></div></section><section id="footer"><div class="footer-wrap">
    <p class="copyright">©2020 Jeremy Wright</p>
    <p class="powerby"><span>Powered by </span><a href="https://gohugo.io" 
        target="_blank">Hugo</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank">Notepadium</a></p></div></section></body>

</html>